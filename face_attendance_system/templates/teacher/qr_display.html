{% extends "base.html" %}

{% block title %}QR Code - {{ subject.subject_name }}{% endblock %}

{% block content %}
<div class="page-header text-center">
    <h2><i class="fas fa-qrcode me-2"></i>Attendance QR Code</h2>
    <p class="text-muted">{{ subject.subject_name }} - Section {{ section.name }}</p>
</div>

<div class="row justify-content-center">
    <div class="col-md-8 text-center">
        <div class="card">
            <div class="card-body p-5">
                <h4 class="mb-4">{{ subject.subject_name }}</h4>
                <p class="text-muted mb-4">Scan this QR code to mark your attendance</p>
                
                <div style="background: white; padding: 30px; border-radius: 15px; display: inline-block; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <img src="{{ qr_image }}" alt="Attendance QR Code" style="width: 350px; height: 350px;">
                </div>
                
                <div class="mt-4">
                    <span class="badge bg-primary fs-6">{{ subject.subject_code }}</span>
                    <span class="badge bg-success fs-6">Section {{ section.name }}</span>
                </div>
                
                <div class="mt-3">
                    <span class="badge bg-warning text-dark fs-6">
                        <i class="fas fa-clock me-1"></i>Expires in {{ expiry_minutes }} minutes
                    </span>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <a href="{{ url_for('show_qr_code', subject_id=subject.id, section_id=section.id) }}" class="btn btn-primary btn-lg me-2">
                <i class="fas fa-sync me-2"></i>Generate New QR
            </a>
            <a href="{{ url_for('generate_qr') }}" class="btn btn-secondary btn-lg">
                <i class="fas fa-arrow-left me-2"></i>Back
            </a>
        </div>
        
        <div class="mt-4 alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>New QR for each class:</strong> A new random QR code is generated each time. Students must scan this specific QR code and be within 200m of KEC campus to mark attendance.
        </div>
        
        <div class="mt-3 text-muted">
            <i class="fas fa-map-marker-alt me-2"></i>
            Kantipur Engineering College, Dhapakhel, Lalitpur
        </div>
    </div>
</div>
{% endblock %}